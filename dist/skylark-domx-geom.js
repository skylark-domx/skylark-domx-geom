/**
 * skylark-domx-geom - The skylark geom library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e){var i=e.define,require=e.require,o="function"==typeof i&&i.amd,n=!o&&"undefined"!=typeof exports;if(!o&&!i){var r={};i=e.define=function(t,e,i){"function"==typeof i?(r[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),o=t.split("/");i.pop();for(var n=0;n<o.length;n++)"."!=o[n]&&(".."==o[n]?i.pop():i.push(o[n]));return i.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):r[t]={factory:null,resolved:!0,exports:i}},require=e.require=function(t){if(!r.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=r[t];if(!module.resolved){var i=[];module.deps.forEach(function(t){i.push(require(t))}),module.exports=module.factory.apply(e,i)||null,module.resolved=!0}return module.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-domx-geom/geom",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-styler"],function(t,e,i,o){"use strict";var n,r=/^(?:body|html)$/i,l=e.toPixel,h=i.offsetParent;function f(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:l(e.borderLeftWidth,t),top:l(e.borderTopWidth,t),right:l(e.borderRightWidth,t),bottom:l(e.borderBottomWidth,t)}}function s(t,e){if(void 0===e)return r.test(t.nodeName)?{top:0,left:0}:t.getBoundingClientRect();var i=h(t),o=s(i),n=m(t),l=f(i);return b(t,{top:e.top-o.top-n.top-l.top+(k(i)||0),left:e.left-o.left-n.left-l.left+(W(i)||0)}),this}function d(t,e){return void 0!==e?(s(t,e),a(t,e),this):t==window||t==document.documentElement||t==document.body?{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth,height:window.innerHeight,width:window.innerWidth}:t.getBoundingClientRect?t.getBoundingClientRect():void 0}function a(t,i){if(void 0==i)return e.isWindow(t)?{width:t.innerWidth,height:t.innerHeight}:e.isDocument(t)?w(document):{width:t.offsetWidth,height:t.offsetHeight};var n="border-box"===o.css(t,"box-sizing"),r={width:i.width,height:i.height};if(!n){var l=v(t),h=f(t);void 0!==r.width&&""!==r.width&&null!==r.width&&(r.width=r.width-l.left-l.right-h.left-h.right),void 0!==r.height&&""!==r.height&&null!==r.height&&(r.height=r.height-l.top-l.bottom-h.top-h.bottom)}return o.css(t,r),this}function c(t,e){if(void 0==e)return{width:t.clientWidth,height:t.clientHeight};var i="border-box"===o.css(t,"box-sizing"),n={width:e.width,height:e.height};if(i){var r=f(t);void 0!==n.width&&(n.width=n.width+r.left+r.right),void 0!==n.height&&(n.height=n.height+r.top+r.bottom)}else{var l=v(t);void 0!==n.width&&(n.width=n.width-l.left-l.right),void 0!==n.height&&(n.height=n.height-l.top-l.bottom)}return o.css(t,n),this}function g(t,e){return void 0==e?p(t).height:(p(t,{height:e}),this)}function p(t,e){var i=c(t),n=v(t);if(void 0===e)return{width:i.width-n.left-n.right,height:i.height-n.top-n.bottom};var r="border-box"===o.css(t,"box-sizing"),l={width:e.width,height:e.height};if(r){var h=f(t);void 0!==l.width&&""!==l.width&&null!==l.width&&(l.width=l.width+n.left+n.right+h.left+h.right),void 0!==l.height&&""!==l.height&&null!==l.height&&(l.height=l.height+n.top+n.bottom+h.top+h.bottom)}return o.css(t,l),this}function u(t,e){return void 0==e?p(t).width:(p(t,{width:e}),this)}function w(t){var e=t.documentElement,i=t.body,o=Math.max,n=o(e.scrollWidth,i.scrollWidth),r=o(e.clientWidth,i.clientWidth),l=o(e.offsetWidth,i.offsetWidth),h=o(e.scrollHeight,i.scrollHeight),f=o(e.clientHeight,i.clientHeight),s=o(e.offsetHeight,i.offsetHeight);return{width:n<l?r:n,height:h<s?f:h}}function m(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:l(e.marginLeft),top:l(e.marginTop),right:l(e.marginRight),bottom:l(e.marginBottom)}}function v(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:l(e.paddingLeft),top:l(e.paddingTop),right:l(e.paddingRight),bottom:l(e.paddingBottom)}}function y(t,e){if(void 0===e){var i=t.getBoundingClientRect(),o=t.ownerDocument.defaultView;return{left:i.left+o.pageXOffset,top:i.top+o.pageYOffset}}var n=h(t),r=y(n),l=m(t),s=f(n);return b(t,{top:e.top-r.top-l.top-s.top,left:e.left-r.left-l.left-s.left}),this}function b(t,e){if(void 0==e){var i=h(t),n=s(t),r=s(i),l=m(t),d=f(i);return{top:n.top-r.top-d.top-l.top,left:n.left-r.left-d.left-l.left}}var i=h(t),a={top:e.top,left:e.left};return"static"==o.css(t,"position")&&(a.position="relative"),o.css(t,a),this}function x(t,e){if(void 0===e){var i=h(t),o=d(t),n=s(i),r=(m(t),f(i));return{top:o.top-n.top-r.top,left:o.left-n.left-r.left,width:o.width,height:o.height}}return b(t,e),a(t,e),this}function W(t,e){9===t.nodeType?t=t.defaultView:t==document.body&&(t=document.scrollingElement||document.documentElement);var i="scrollLeft"in t;return void 0===e?i?t.scrollLeft:t.pageXOffset:(i?t.scrollLeft=e:t.scrollTo(e,t.scrollY),this)}function k(t,e){9===t.nodeType?t=t.defaultView:t==document.body&&(t=document.scrollingElement||document.documentElement);var i="scrollTop"in t;return void 0===e?i?t.scrollTop:t.pageYOffset:(i?t.scrollTop=e:t.scrollTo(t.scrollX,e),this)}function H(t){return d(t=t||window)}function T(){return T}return e.mixin(T,{borderExtents:f,boundingHeight:function(t,e){return void 0==e?a(t).height:(a(t,{height:e}),this)},boundingPosition:s,boundingRect:d,boundingSize:a,boundingWidth:function(t,e){return void 0==e?a(t).width:(a(t,{width:e}),this)},clientHeight:function(t,e){return void 0==e?c(t).height:c(t,{height:e})},clientSize:c,clientWidth:function(t,e){return void 0==e?c(t).width:(c(t,{width:e}),this)},contentHeight:g,contentRect:function(t){var e=c(t),i=v(t);return{left:i.left,top:i.top,width:e.width-i.left-i.right,height:e.height-i.top-i.bottom}},contentSize:p,contentWidth:u,getDocumentSize:w,hasScrollbar:function(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)},height:g,inview:function(t,e){var i=function(t,e){var i={};return e=+e||0,i.width=(i.right=t.right+e)-(i.left=t.left-e),i.height=(i.bottom=t.bottom+e)-(i.top=t.top-e),i}(d(t),e),o=H();return!!i&&i.bottom>=0&&i.right>=0&&i.top<=o.height&&i.left<=o.width},marginExtents:m,marginRect:function(t){var e=x(t),i=m(t);return{left:e.left,top:e.top,width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}},marginSize:function(t){var e=a(t),i=m(t);return{width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}},offsetParent:h,paddingExtents:v,pagePosition:y,pageRect:function(t,e){if(void 0===e){var i=t.getBoundingClientRect(),o=t.ownerDocument.defaultView;return{left:i.left+o.pageXOffset,top:i.top+o.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}}return y(t,e),a(t,e),this},relativePosition:b,relativeRect:x,scrollbarWidth:function(){if(void 0!==n)return n;var t,e,r=i.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],l=r.childNodes[0];i.append(document.body,r),t=l.offsetWidth,o.css(r,"overflow","scroll"),e=l.offsetWidth,t===e&&(e=r[0].clientWidth);return i.remove(r),n=t-e},scrollIntoView:function(t,e){var i,o,n,r,l,h,f=t.parentNode,s=function(t,e){var i,o,n=t;i=o=0;for(;n&&n!=e&&n.nodeType;)i+=n.offsetLeft||0,o+=n.offsetTop||0,n=n.offsetParent;return{x:i,y:o}}(t,f);i=s.x,o=s.y,n=t.offsetWidth,r=t.offsetHeight,l=f.clientWidth,h=f.clientHeight,"end"==e?(i-=l-n,o-=h-r):"center"==e&&(i-=l/2-n/2,o-=h/2-r/2);return f.scrollLeft=i,f.scrollTop=o,this},scrollLeft:W,scrollTop:k,scrollBy:function(t,e,i){t.scrollLeft+=e,t.scrollTop+=i},size:p,testAxis:function(t){var e=t.offsetTop,i=t.offsetLeft,o=t.offsetWidth,n=t.offsetHeight;for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,i+=t.offsetLeft;var r={x:0,y:0};e<window.pageYOffset?r.y=e-window.pageYOffset:e+n>window.pageYOffset+window.innerHeight&&(r.y=e+n-(window.pageYOffset+window.innerHeight));i<window.pageXOffset?r.x=i-window.pageXOffset:i+o>window.pageXOffset+window.innerWidth&&(r.x=i+o-(window.pageXOffset+window.innerWidth));return r},viewportSize:H,width:u}),t.attach("domx.geom",T)}),t("skylark-domx-geom/posit",["skylark-langx/langx","skylark-domx-noder","skylark-domx-styler","./geom"],function(t,e,i,o){"use strict";var n=Math.max,r=Math.abs,l=/left|center|right/,h=/top|center|bottom/,f=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,d=/%$/;function a(t,e,i){return[parseFloat(t[0])*(d.test(t[0])?e/100:1),parseFloat(t[1])*(d.test(t[1])?i/100:1)]}function c(t,e){return parseInt(i.css(t,e),10)||0}var g={fit:{left:function(t,e){var i,o=e.within,r=o.isWindow?o.scrollLeft:o.offset.left,l=o.width,h=t.left-e.collisionPosition.marginLeft,f=r-h,s=h+e.collisionWidth-l-r;e.collisionWidth>l?f>0&&s<=0?(i=t.left+f+e.collisionWidth-l-r,t.left+=f-i):t.left=s>0&&f<=0?r:f>s?r+l-e.collisionWidth:r:f>0?t.left+=f:s>0?t.left-=s:t.left=n(t.left-h,t.left)},top:function(t,e){var i,o=e.within,r=o.isWindow?o.scrollTop:o.offset.top,l=e.within.height,h=t.top-e.collisionPosition.marginTop,f=r-h,s=h+e.collisionHeight-l-r;e.collisionHeight>l?f>0&&s<=0?(i=t.top+f+e.collisionHeight-l-r,t.top+=f-i):t.top=s>0&&f<=0?r:f>s?r+l-e.collisionHeight:r:f>0?t.top+=f:s>0?t.top-=s:t.top=n(t.top-h,t.top)}},flip:{left:function(t,e){var i,o,n=e.within,l=n.offset.left+n.scrollLeft,h=n.width,f=n.isWindow?n.scrollLeft:n.offset.left,s=t.left-e.collisionPosition.marginLeft,d=s-f,a=s+e.collisionWidth-h-f,c="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,g="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];d<0?((i=t.left+c+g+p+e.collisionWidth-h-l)<0||i<r(d))&&(t.left+=c+g+p):a>0&&((o=t.left-e.collisionPosition.marginLeft+c+g+p-f)>0||r(o)<a)&&(t.left+=c+g+p)},top:function(t,e){var i,o,n=e.within,l=n.offset.top+n.scrollTop,h=n.height,f=n.isWindow?n.scrollTop:n.offset.top,s=t.top-e.collisionPosition.marginTop,d=s-f,a=s+e.collisionHeight-h-f,c="top"===e.my[1],g=c?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,u=-2*e.offset[1];d<0?((o=t.top+g+p+u+e.collisionHeight-h-l)<0||o<r(d))&&(t.top+=g+p+u):a>0&&((i=t.top-e.collisionPosition.marginTop+g+p+u-f)>0||r(i)<a)&&(t.top+=g+p+u)}},flipfit:{left:function(){g.flip.left.apply(this,arguments),g.fit.left.apply(this,arguments)},top:function(){g.flip.top.apply(this,arguments),g.fit.top.apply(this,arguments)}}};return o.posit=function(d,p){var u,w,m,v,y,b,x=(p=t.extend({},p)).of,W=(z=p.within,P=z||window,L=e.isWindow(P),S=!!P&&9===P.nodeType,E=!L&&!S,R=o.marginSize(P),{element:P,isWindow:L,isDocument:S,offset:E?o.pagePosition(z):{left:0,top:0},scrollLeft:o.scrollLeft(P),scrollTop:o.scrollTop(P),width:R.width,height:R.height}),k=function(t){var e=t.isWindow||t.isDocument?"":i.css(t.element,"overflow-x"),n=t.isWindow||t.isDocument?"":i.css(t.element,"overflow-y"),r="scroll"===e||"auto"===e&&t.width<o.scrollWidth(t.element);return{width:"scroll"===n||"auto"===n&&t.height<o.scrollHeight(t.element)?o.scrollbarWidth():0,height:r?o.scrollbarWidth():0}}(W),H=(p.collision||"flip").split(" "),T={};var z,P,L,S,E,R;O=x,b=9===O.nodeType?{size:size(O),offset:{top:0,left:0}}:e.isWindow(O)?{size:o.size(O),offset:{top:o.scrollTop(O),left:o.scrollLeft(O)}}:O.preventDefault?{size:{width:0,height:0},offset:{top:O.pageY,left:O.pageX}}:{size:o.size(O),offset:o.pagePosition(O)},x.preventDefault&&(p.at="left top");var O;w=b.size.width,m=b.size.height,v=b.offset,y=t.extend({},v),t.each(["my","at"],function(){var t,e,i=(p[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=f.exec(i[0]),e=f.exec(i[1]),T[this]=[t?t[0]:0,e?e[0]:0],p[this]=[s.exec(i[0])[0],s.exec(i[1])[0]]}),1===H.length&&(H[1]=H[0]);"right"===p.at[0]?y.left+=w:"center"===p.at[0]&&(y.left+=w/2);"bottom"===p.at[1]?y.top+=m:"center"===p.at[1]&&(y.top+=m/2);return u=a(T.at,w,m),y.left+=u[0],y.top+=u[1],function(e){var i,l,h=o.marginSize(e),f=h.width,s=h.height,d=c(e,"marginLeft"),b=c(e,"marginTop"),z=f+d+c(e,"marginRight")+k.width,P=s+b+c(e,"marginBottom")+k.height,L=t.extend({},y),S=a(T.my,h.width,h.height);"right"===p.my[0]?L.left-=f:"center"===p.my[0]&&(L.left-=f/2),"bottom"===p.my[1]?L.top-=s:"center"===p.my[1]&&(L.top-=s/2),L.left+=S[0],L.top+=S[1],i={marginLeft:d,marginTop:b},t.each(["left","top"],function(t,o){g[H[t]]&&g[H[t]][o](L,{targetWidth:w,targetHeight:m,elemWidth:f,elemHeight:s,collisionPosition:i,collisionWidth:z,collisionHeight:P,offset:[u[0]+S[0],u[1]+S[1]],my:p.my,at:p.at,within:W,elem:e})}),p.using&&(l=function(t){var i=v.left-L.left,o=i+w-f,l=v.top-L.top,h=l+m-s,d={target:{element:x,left:v.left,top:v.top,width:w,height:m},element:{element:e,left:L.left,top:L.top,width:f,height:s},horizontal:o<0?"left":i>0?"right":"center",vertical:h<0?"top":l>0?"bottom":"middle"};w<f&&r(i+o)<w&&(d.horizontal="center"),m<s&&r(l+h)<m&&(d.vertical="middle"),n(r(i),r(o))>n(r(l),r(h))?d.important="horizontal":d.important="vertical",p.using.call(this,t,d)}),o.pagePosition(e,t.extend(L,{using:l}))}(d)}}),t("skylark-domx-geom/scroll-to-top",["skylark-langx","skylark-domx-styler","./geom"],function(t,e,i){return i.scrollToTop=function(e,i,o,n){var r=parseInt(e.scrollTop),l=0,h=1e3*o/5,f=parseInt(i),s=setInterval(function(){++l<=h&&(e.scrollTop=(f-r)/h*l+r),l>=h+1&&(clearInterval(s),n&&t.debounce(n,1e3)())},5);return this}}),t("skylark-domx-geom/main",["skylark-langx/langx","./geom","skylark-domx-velm","skylark-domx-query","./posit","./scroll-to-top"],function(t,e,i,o){return i.delegate(["borderExtents","boundingPosition","boundingHeight","boundingRect","boundingSize","boundingWidth","clientHeight","clientSize","clientWidth","contentHeight","contentRect","contentSize","contentWidth","marginExtents","marginRect","marginSize","offsetParent","paddingExtents","pagePosition","pageRect","relativePosition","relativeRect","scrollIntoView","scrollLeft","scrollTop"],e,{}),o.fn.offset=o.wraps.wrapper_value(e.pagePosition,e,e.pagePosition),o.fn.scrollTop=o.wraps.wrapper_value(e.scrollTop,e),o.fn.scrollLeft=o.wraps.wrapper_value(e.scrollLeft,e),o.fn.position=function(i){if(!this.length)return this;if(i)return i.of&&i.of.length&&((i=t.clone(i)).of=i.of[0]),this.each(function(){e.posit(this,i)});var o=this[0];return e.relativePosition(o)},o.fn.offsetParent=o.wraps.wrapper_map(e.offsetParent,e),o.fn.boundingSize=o.wraps.wrapper_value(e.boundingSize,e),o.fn.width=o.wraps.wrapper_value(e.width,e,e.width),o.fn.height=o.wraps.wrapper_value(e.height,e,e.height),o.fn.clientSize=o.wraps.wrapper_value(e.clientSize,e),["width","height"].forEach(function(t){var i=t.replace(/./,function(t){return t[0].toUpperCase()});o.fn["outer"+i]=function(i,o){if(arguments.length?"boolean"!=typeof i&&(o=i,i=!1):(i=!1,o=void 0),void 0===o){var n=this[0];if(!n)return;var r=e.boundingSize(n);if(i){var l=e.marginExtents(n);r.width=r.width+l.left+l.right,r.height=r.height+l.top+l.bottom}return"width"===t?r.width:r.height}return this.each(function(n,r){var l={},h=e.marginExtents(r);"width"===t?(l.width=o,i&&(l.width=l.width-h.left-h.right)):(l.height=o,i&&(l.height=l.height-h.top-h.bottom)),e.boundingSize(r,l)})}}),o.fn.innerWidth=o.wraps.wrapper_value(e.clientWidth,e,e.clientWidth),o.fn.innerHeight=o.wraps.wrapper_value(e.clientHeight,e,e.clientHeight),e}),t("skylark-domx-geom",["skylark-domx-geom/main"],function(t){return t})}(i),!o){var l=require("skylark-langx-ns");n?module.exports=l:e.skylarkjs=l}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-geom.js.map
