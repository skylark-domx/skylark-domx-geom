/**
 * skylark-domx-geom - The skylark geom library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e){var i=e.define,require=e.require,o="function"==typeof i&&i.amd,n=!o&&"undefined"!=typeof exports;if(!o&&!i){var r={};i=e.define=function(t,e,i){"function"==typeof i?(r[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),o=t.split("/");i.pop();for(var n=0;n<o.length;n++)"."!=o[n]&&(".."==o[n]?i.pop():i.push(o[n]));return i.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):r[t]={factory:null,resolved:!0,exports:i}},require=e.require=function(t){if(!r.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=r[t];if(!module.resolved){var i=[];module.deps.forEach(function(t){i.push(require(t))}),module.exports=module.factory.apply(e,i)||null,module.resolved=!0}return module.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-domx-geom/geom",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-styler"],function(t,e,i,o){var n,r=/^(?:body|html)$/i,f=e.toPixel,l=i.offsetParent;function h(){if(void 0!==n)return n;var t,e,r=i.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],f=r.childNodes[0];return i.append(document.body,r),t=f.offsetWidth,o.css(r,"overflow","scroll"),e=f.offsetWidth,t===e&&(e=r[0].clientWidth),i.remove(r),n=t-e}function s(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:f(e.borderLeftWidth,t),top:f(e.borderTopWidth,t),right:f(e.borderRightWidth,t),bottom:f(e.borderBottomWidth,t)}}function d(t,e){if(void 0===e)return r.test(t.nodeName)?{top:0,left:0}:t.getBoundingClientRect();var i=l(t),o=d(i),n=c(t),f=s(i);return v(t,{top:e.top-o.top-n.top-f.top,left:e.left-o.left-n.left-f.left}),this}function a(t,e){return void 0===e?t.getBoundingClientRect():(d(t,e),b(t,e),this)}function p(t,e){if(void 0==e)return{width:t.clientWidth,height:t.clientHeight};var i="border-box"===o.css(t,"box-sizing"),n={width:e.width,height:e.height};if(i){var r=s(t);void 0!==n.width&&(n.width=n.width+r.left+r.right),void 0!==n.height&&(n.height=n.height+r.top+r.bottom)}else{var f=w(t);void 0!==n.width&&(n.width=n.width-f.left-f.right),void 0!==n.height&&(n.height=n.height-f.top-f.bottom)}return o.css(t,n),this}function g(t){var e=t.documentElement,i=t.body,o=Math.max,n=o(e.scrollWidth,i.scrollWidth),r=o(e.clientWidth,i.clientWidth),f=o(e.offsetWidth,i.offsetWidth),l=o(e.scrollHeight,i.scrollHeight),h=o(e.clientHeight,i.clientHeight),s=o(e.offsetHeight,i.offsetHeight);return{width:n<f?r:n,height:l<s?h:l}}function c(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:f(e.marginLeft),top:f(e.marginTop),right:f(e.marginRight),bottom:f(e.marginBottom)}}function u(t){var e=b(t),i=c(t);return{width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}}function w(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:f(e.paddingLeft),top:f(e.paddingTop),right:f(e.paddingRight),bottom:f(e.paddingBottom)}}function m(t,e){if(void 0===e){var i=t.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset}}var o=l(t),n=m(o),r=c(t),f=s(o);return v(t,{top:e.top-n.top-r.top-f.top,left:e.left-n.left-r.left-f.left}),this}function v(t,e){if(void 0==e){var i=l(t),n=d(t),r=d(i),f=(c(t),s(i));return{top:n.top-r.top-f.top,left:n.left-r.left-f.left}}var h={top:e.top,left:e.left};return"static"==o.css(t,"position")&&(h.position="relative"),o.css(t,h),this}function y(t,e){if(void 0===e){var i=l(t),o=a(t),n=d(i),r=(c(t),s(i));return{top:o.top-n.top-r.top,left:o.left-n.left-r.left,width:o.width,height:o.height}}return v(t,e),b(t,e),this}function x(t,e){9===t.nodeType&&(t=t.defaultView);var i="scrollLeft"in t;return void 0===e?i?t.scrollLeft:t.pageXOffset:(i?t.scrollLeft=e:t.scrollTo(e,t.scrollY),this)}function W(t,e){9===t.nodeType&&(t=t.defaultView);var i="scrollTop"in t;return void 0===e?i?t.scrollTop:t.pageYOffset:(i?t.scrollTop=e:t.scrollTo(t.scrollX,e),this)}function b(t,i){if(void 0==i)return e.isWindow(t)?{width:t.innerWidth,height:t.innerHeight}:e.isDocument(t)?g(document):{width:t.offsetWidth,height:t.offsetHeight};var n="border-box"===o.css(t,"box-sizing"),r={width:i.width,height:i.height};if(!n){var f=w(t),l=s(t);void 0!==r.width&&""!==r.width&&null!==r.width&&(r.width=r.width-f.left-f.right-l.left-l.right),void 0!==r.height&&""!==r.height&&null!==r.height&&(r.height=r.height-f.top-f.bottom-l.top-l.bottom)}return o.css(t,r),this}function H(){return H}return e.mixin(H,{borderExtents:s,boundingPosition:d,boundingRect:a,clientHeight:function(t,e){return void 0==e?p(t).height:p(t,{height:e})},clientSize:p,clientWidth:function(t,e){return void 0==e?p(t).width:(p(t,{width:e}),this)},contentRect:function(t){var e=p(t),i=w(t);return{left:i.left,top:i.top,width:e.width-i.left-i.right,height:e.height-i.top-i.bottom}},fullCover:function(t,i,o){let n=o,r=i;e.isUndefined(r)&&(r=!0);e.isUndefined(n)&&(n=!0);t.style.position="absolute",r&&(t.style.left=0,t.style.right=0);n&&(t.style.top=0,t.style.bottom=0)},getDocumentSize:g,height:function(t,e){return void 0==e?b(t).height:(b(t,{height:e}),this)},isVisible:function(t){var e=t.offsetTop,i=t.offsetLeft,o=t.offsetWidth,n=t.offsetHeight;for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,i+=t.offsetLeft;return value=e>=window.pageYOffset&&i>=window.pageXOffset&&e+n<=window.pageYOffset+window.innerHeight&&i+o<=window.pageXOffset+window.innerWidth},marginExtents:c,marginRect:function(t){var e=y(t),i=c(t);return{left:e.left,top:e.top,width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}},marginSize:u,offsetParent:l,paddingExtents:w,pagePosition:m,pageRect:function(t,e){if(void 0===e){var i=t.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}}return m(t,e),b(t,e),this},relativePosition:v,relativeRect:y,scrollbarWidth:h,scrollIntoView:function(t,e){var i,o,n,r,f,l,h=t.parentNode,s=function(t,e){var i,o,n=t;i=o=0;for(;n&&n!=e&&n.nodeType;)i+=n.offsetLeft||0,o+=n.offsetTop||0,n=n.offsetParent;return{x:i,y:o}}(t,h);i=s.x,o=s.y,n=t.offsetWidth,r=t.offsetHeight,f=h.clientWidth,l=h.clientHeight,"end"==e?(i-=f-n,o-=l-r):"center"==e&&(i-=f/2-n/2,o-=l/2-r/2);return h.scrollLeft=i,h.scrollTop=o,this},scrollLeft:x,scrollTop:W,size:b,testAxis:function(t){var e=t.offsetTop,i=t.offsetLeft,o=t.offsetWidth,n=t.offsetHeight;for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,i+=t.offsetLeft;var r={x:0,y:0};e<window.pageYOffset?r.y=e-window.pageYOffset:e+n>window.pageYOffset+window.innerHeight&&(r.y=e+n-(window.pageYOffset+window.innerHeight));i<window.pageXOffset?r.x=i-window.pageXOffset:i+o>window.pageXOffset+window.innerWidth&&(r.x=i+o-(window.pageXOffset+window.innerWidth));return r},width:function(t,e){return void 0==e?b(t).width:(b(t,{width:e}),this)}}),function(){var t=Math.max,n=Math.abs,r=/left|center|right/,f=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,d=/%$/;function a(t,e,i){return[parseFloat(t[0])*(d.test(t[0])?e/100:1),parseFloat(t[1])*(d.test(t[1])?i/100:1)]}function p(t,e){return parseInt(o.css(t,e),10)||0}var g={fit:{left:function(e,i){var o,n=i.within,r=n.isWindow?n.scrollLeft:n.offset.left,f=n.width,l=e.left-i.collisionPosition.marginLeft,h=r-l,s=l+i.collisionWidth-f-r;i.collisionWidth>f?h>0&&s<=0?(o=e.left+h+i.collisionWidth-f-r,e.left+=h-o):e.left=s>0&&h<=0?r:h>s?r+f-i.collisionWidth:r:h>0?e.left+=h:s>0?e.left-=s:e.left=t(e.left-l,e.left)},top:function(e,i){var o,n=i.within,r=n.isWindow?n.scrollTop:n.offset.top,f=i.within.height,l=e.top-i.collisionPosition.marginTop,h=r-l,s=l+i.collisionHeight-f-r;i.collisionHeight>f?h>0&&s<=0?(o=e.top+h+i.collisionHeight-f-r,e.top+=h-o):e.top=s>0&&h<=0?r:h>s?r+f-i.collisionHeight:r:h>0?e.top+=h:s>0?e.top-=s:e.top=t(e.top-l,e.top)}},flip:{left:function(t,e){var i,o,r=e.within,f=r.offset.left+r.scrollLeft,l=r.width,h=r.isWindow?r.scrollLeft:r.offset.left,s=t.left-e.collisionPosition.marginLeft,d=s-h,a=s+e.collisionWidth-l-h,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,g="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,c=-2*e.offset[0];d<0?((i=t.left+p+g+c+e.collisionWidth-l-f)<0||i<n(d))&&(t.left+=p+g+c):a>0&&((o=t.left-e.collisionPosition.marginLeft+p+g+c-h)>0||n(o)<a)&&(t.left+=p+g+c)},top:function(t,e){var i,o,r=e.within,f=r.offset.top+r.scrollTop,l=r.height,h=r.isWindow?r.scrollTop:r.offset.top,s=t.top-e.collisionPosition.marginTop,d=s-h,a=s+e.collisionHeight-l-h,p="top"===e.my[1],g=p?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,c="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,u=-2*e.offset[1];d<0?((o=t.top+g+c+u+e.collisionHeight-l-f)<0||o<n(d))&&(t.top+=g+c+u):a>0&&((i=t.top-e.collisionPosition.marginTop+g+c+u-h)>0||n(i)<a)&&(t.top+=g+c+u)}},flipfit:{left:function(){g.flip.left.apply(this,arguments),g.fit.left.apply(this,arguments)},top:function(){g.flip.top.apply(this,arguments),g.fit.top.apply(this,arguments)}}};H.posit=function(d,c){var w,v,y,H,T,k,P=(c=e.extend({},c)).of,L=(E=c.within,X=E||window,Y=i.isWindow(X),S=!!X&&9===X.nodeType,_=!Y&&!S,C=u(X),{element:X,isWindow:Y,isDocument:S,offset:_?m(E):{left:0,top:0},scrollLeft:x(X),scrollTop:W(X),width:C.width,height:C.height}),z=function(t){var e=t.isWindow||t.isDocument?"":o.css(t.element,"overflow-x"),i=t.isWindow||t.isDocument?"":o.css(t.element,"overflow-y"),n="scroll"===e||"auto"===e&&t.width<scrollWidth(t.element);return{width:"scroll"===i||"auto"===i&&t.height<scrollHeight(t.element)?h():0,height:n?h():0}}(L),O=(c.collision||"flip").split(" "),R={};var E,X,Y,S,_,C;B=P,k=9===B.nodeType?{size:b(B),offset:{top:0,left:0}}:i.isWindow(B)?{size:b(B),offset:{top:W(B),left:x(B)}}:B.preventDefault?{size:{width:0,height:0},offset:{top:B.pageY,left:B.pageX}}:{size:b(B),offset:m(B)},P.preventDefault&&(c.at="left top");var B;v=k.size.width,y=k.size.height,H=k.offset,T=e.extend({},H),e.each(["my","at"],function(){var t,e,i=(c[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):f.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=f.test(i[1])?i[1]:"center",t=l.exec(i[0]),e=l.exec(i[1]),R[this]=[t?t[0]:0,e?e[0]:0],c[this]=[s.exec(i[0])[0],s.exec(i[1])[0]]}),1===O.length&&(O[1]=O[0]);"right"===c.at[0]?T.left+=v:"center"===c.at[0]&&(T.left+=v/2);"bottom"===c.at[1]?T.top+=y:"center"===c.at[1]&&(T.top+=y/2);return w=a(R.at,v,y),T.left+=w[0],T.top+=w[1],function(i){var o,r,f=u(i),l=f.width,h=f.height,s=p(i,"marginLeft"),d=p(i,"marginTop"),x=l+s+p(i,"marginRight")+z.width,W=h+d+p(i,"marginBottom")+z.height,b=e.extend({},T),k=a(R.my,f.width,f.height);"right"===c.my[0]?b.left-=l:"center"===c.my[0]&&(b.left-=l/2),"bottom"===c.my[1]?b.top-=h:"center"===c.my[1]&&(b.top-=h/2),b.left+=k[0],b.top+=k[1],o={marginLeft:s,marginTop:d},e.each(["left","top"],function(t,e){g[O[t]]&&g[O[t]][e](b,{targetWidth:v,targetHeight:y,elemWidth:l,elemHeight:h,collisionPosition:o,collisionWidth:x,collisionHeight:W,offset:[w[0]+k[0],w[1]+k[1]],my:c.my,at:c.at,within:L,elem:i})}),c.using&&(r=function(e){var o=H.left-b.left,r=o+v-l,f=H.top-b.top,s=f+y-h,d={target:{element:P,left:H.left,top:H.top,width:v,height:y},element:{element:i,left:b.left,top:b.top,width:l,height:h},horizontal:r<0?"left":o>0?"right":"center",vertical:s<0?"top":f>0?"bottom":"middle"};v<l&&n(o+r)<v&&(d.horizontal="center"),y<h&&n(f+s)<y&&(d.vertical="middle"),t(n(o),n(r))>t(n(f),n(s))?d.important="horizontal":d.important="vertical",c.using.call(this,e,d)}),m(i,e.extend(b,{using:r}))}(d)}}(),t.attach("domx.geom",H)}),t("skylark-domx-geom/main",["skylark-langx/langx","./geom","skylark-domx-velm","skylark-domx-query"],function(t,e,i,o){return i.delegate(["borderExtents","boundingPosition","boundingRect","clientHeight","clientSize","clientWidth","contentRect","height","marginExtents","offsetParent","paddingExtents","pagePosition","pageRect","relativePosition","relativeRect","scrollIntoView","scrollLeft","scrollTop","size","width"],e),o.fn.offset=o.wraps.wrapper_value(e.pagePosition,e,e.pagePosition),o.fn.scrollTop=o.wraps.wrapper_value(e.scrollTop,e),o.fn.scrollLeft=o.wraps.wrapper_value(e.scrollLeft,e),o.fn.position=function(i){if(!this.length)return this;if(i)return i.of&&i.of.length&&((i=t.clone(i)).of=i.of[0]),this.each(function(){e.posit(this,i)});var o=this[0];return e.relativePosition(o)},o.fn.offsetParent=o.wraps.wrapper_map(e.offsetParent,e),o.fn.size=o.wraps.wrapper_value(e.size,e),o.fn.width=o.wraps.wrapper_value(e.width,e,e.width),o.fn.height=o.wraps.wrapper_value(e.height,e,e.height),o.fn.clientSize=o.wraps.wrapper_value(e.clientSize,e.clientSize),["width","height"].forEach(function(t){var i=t.replace(/./,function(t){return t[0].toUpperCase()});o.fn["outer"+i]=function(i,o){if(arguments.length?"boolean"!=typeof i&&(o=i,i=!1):(i=!1,o=void 0),void 0===o){var n=this[0];if(!n)return;var r=e.size(n);if(i){var f=e.marginExtents(n);r.width=r.width+f.left+f.right,r.height=r.height+f.top+f.bottom}return"width"===t?r.width:r.height}return this.each(function(n,r){var f={},l=e.marginExtents(r);"width"===t?(f.width=o,i&&(f.width=f.width-l.left-l.right)):(f.height=o,i&&(f.height=f.height-l.top-l.bottom)),e.size(r,f)})}}),o.fn.innerWidth=o.wraps.wrapper_value(e.clientWidth,e,e.clientWidth),o.fn.innerHeight=o.wraps.wrapper_value(e.clientHeight,e,e.clientHeight),e}),t("skylark-domx-geom",["skylark-domx-geom/main"],function(t){return t})}(i),!o){var f=require("skylark-langx-ns");n?module.exports=f:e.skylarkjs=f}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-geom.js.map
